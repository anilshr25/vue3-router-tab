<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Title Management Example</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
    }
    
    .example-section {
      margin: 20px 0;
      padding: 15px;
      border: 1px solid #ddd;
      border-radius: 8px;
      background: #f9f9f9;
    }
    
    .example-section h3 {
      margin-top: 0;
      color: #333;
    }
    
    .input-group {
      margin: 10px 0;
    }
    
    .input-group label {
      display: block;
      margin-bottom: 5px;
      font-weight: bold;
    }
    
    .input-group input {
      width: 100%;
      padding: 8px;
      border: 1px solid #ccc;
      border-radius: 4px;
      box-sizing: border-box;
    }
    
    .result {
      margin: 10px 0;
      padding: 10px;
      background: #e8f4fd;
      border-radius: 4px;
      font-family: monospace;
    }
    
    .examples-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 15px;
      margin: 15px 0;
    }
    
    .example-item {
      padding: 10px;
      background: white;
      border: 1px solid #eee;
      border-radius: 4px;
    }
    
    .example-item .input {
      font-weight: bold;
      color: #666;
    }
    
    .example-item .output {
      color: #007cba;
      font-family: monospace;
    }
    
    button {
      background: #007cba;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 4px;
      cursor: pointer;
      margin: 5px;
    }
    
    button:hover {
      background: #005a87;
    }
  </style>
</head>
<body>
  <h1>üè∑Ô∏è Title Management System Demo</h1>
  <p>This example demonstrates the comprehensive title management features of vue3-router-tab.</p>

  <div class="example-section">
    <h3>Interactive Title Processing</h3>
    <div class="input-group">
      <label for="titleInput">Enter a title to process:</label>
      <input type="text" id="titleInput" placeholder="Try: profile, untitled, null, empty string..." />
    </div>
    <div class="result" id="processedResult">
      Processed title will appear here...
    </div>
  </div>

  <div class="example-section">
    <h3>Title Replacement Demo</h3>
    <div class="input-group">
      <label for="currentTitle">Current Title:</label>
      <input type="text" id="currentTitle" placeholder="profile" />
    </div>
    <div class="input-group">
      <label for="newTitle">New Title:</label>
      <input type="text" id="newTitle" placeholder="My New Profile" />
    </div>
    <button onclick="testReplacement()">Test Title Replacement</button>
    <div class="result" id="replacementResult">
      Replacement result will appear here...
    </div>
  </div>

  <div class="example-section">
    <h3>Built-in Processing Examples</h3>
    <div class="examples-grid" id="examplesGrid">
      <!-- Examples will be populated by JavaScript -->
    </div>
  </div>

  <div class="example-section">
    <h3>Configuration Demo</h3>
    <label><input type="checkbox" id="capitalizeToggle" /> Capitalize First Letter</label>
    <label><input type="checkbox" id="trimToggle" checked /> Trim Whitespace</label>
    <div class="input-group">
      <label for="maxLengthInput">Max Length:</label>
      <input type="number" id="maxLengthInput" value="50" min="5" max="200" />
    </div>
    <div class="input-group">
      <label for="placeholderInput">Placeholder Text:</label>
      <input type="text" id="placeholderInput" value="Untitled" />
    </div>
    <button onclick="updateConfig()">Update Configuration</button>
  </div>

  <div class="example-section">
    <h3>Integration Examples</h3>
    <h4>Vue 3 Component Usage:</h4>
    <pre><code>&lt;template&gt;
  &lt;router-tab
    :title-config="{
      placeholder: 'Untitled Document',
      maxLength: 30,
      capitalize: true,
      replacements: {
        'profile': 'User Profile',
        'settings': 'App Settings'
      }
    }"
    :enable-title-replacement="true"
    untitled-text="No Title"
  /&gt;
&lt;/template&gt;</code></pre>

    <h4>Programmatic Usage:</h4>
    <pre><code>import { TitleManager, processTitle } from 'vue3-router-tab'

// Quick processing
const title = processTitle('untitled') // "Untitled"

// Advanced configuration
const titleManager = new TitleManager({
  placeholder: 'No Title',
  replacements: { 'profile': 'User Profile' }
})
const result = titleManager.processTitle('profile') // "User Profile"</code></pre>
  </div>

  <script type="module">
    // Simulate the TitleManager functionality for demo purposes
    class TitleManager {
      constructor(config = {}) {
        this.config = {
          placeholder: config.placeholder || 'Untitled',
          maxLength: config.maxLength || 200,
          capitalize: config.capitalize || false,
          trimWhitespace: config.trimWhitespace !== false,
          replacements: config.replacements || {
            'profile': 'User Profile', 
            'settings': 'App Settings',
            'dashboard': 'Main Dashboard',
            'untitled': 'New Document'
          }
        }
      }

      processTitle(input) {
        // Handle null/undefined
        if (input === null || input === undefined) return this.config.placeholder
        
        // Convert to string
        let title = String(input).trim()
        
        // Handle empty
        if (!title) return this.config.placeholder
        
        // Apply replacements (case-insensitive)
        const lowerTitle = title.toLowerCase()
        for (const [pattern, replacement] of Object.entries(this.config.replacements)) {
          if (lowerTitle === pattern.toLowerCase() || lowerTitle.includes(pattern.toLowerCase())) {
            title = replacement
            break
          }
        }
        
        // Apply capitalization
        if (this.config.capitalize && title) {
          title = title.charAt(0).toUpperCase() + title.slice(1)
        }
        
        // Apply length limit
        if (title.length > this.config.maxLength) {
          title = title.substring(0, this.config.maxLength - 3) + '...'
        }
        
        return title || this.config.placeholder
      }

      replaceTitle(currentTitle, newTitle, matchPatterns = []) {
        const patterns = matchPatterns.length > 0 ? matchPatterns : ['profile', 'untitled', 'settings']
        const current = String(currentTitle || '').toLowerCase()
        
        const shouldReplace = patterns.some(pattern => 
          current === pattern.toLowerCase() || current.includes(pattern.toLowerCase())
        )
        
        return shouldReplace ? this.processTitle(newTitle) : this.processTitle(currentTitle)
      }
    }

    // Global instance
    let titleManager = new TitleManager()

    // Interactive processing
    document.getElementById('titleInput').addEventListener('input', (e) => {
      const input = e.target.value
      let processedInput = input
      
      // Handle special test cases
      if (input.toLowerCase() === 'null') processedInput = null
      if (input.toLowerCase() === 'undefined') processedInput = undefined
      if (input === '') processedInput = ''
      
      const result = titleManager.processTitle(processedInput)
      document.getElementById('processedResult').textContent = `"${result}"`
    })

    // Title replacement test
    window.testReplacement = () => {
      const current = document.getElementById('currentTitle').value
      const newTitle = document.getElementById('newTitle').value
      const result = titleManager.replaceTitle(current, newTitle)
      document.getElementById('replacementResult').textContent = `"${result}"`
    }

    // Update configuration
    window.updateConfig = () => {
      const config = {
        capitalize: document.getElementById('capitalizeToggle').checked,
        trimWhitespace: document.getElementById('trimToggle').checked,
        maxLength: parseInt(document.getElementById('maxLengthInput').value),
        placeholder: document.getElementById('placeholderInput').value,
        replacements: {
          'profile': 'User Profile',
          'settings': 'App Settings',
          'dashboard': 'Main Dashboard',
          'untitled': 'New Document'
        }
      }
      
      titleManager = new TitleManager(config)
      
      // Refresh current example if there's input
      const titleInput = document.getElementById('titleInput')
      if (titleInput.value) {
        titleInput.dispatchEvent(new Event('input'))
      }
      
      // Update examples grid
      populateExamples()
    }

    // Populate examples
    function populateExamples() {
      const examples = [
        { input: null, label: 'null' },
        { input: undefined, label: 'undefined' },
        { input: '', label: 'empty string' },
        { input: '   ', label: 'whitespace only' },
        { input: 'profile', label: '"profile"' },
        { input: 'Profile', label: '"Profile"' },
        { input: 'SETTINGS', label: '"SETTINGS"' },
        { input: 'My Dashboard', label: '"My Dashboard"' },
        { input: 'untitled', label: '"untitled"' },
        { input: 'This is a very long title that should be truncated', label: 'long title' }
      ]

      const grid = document.getElementById('examplesGrid')
      grid.innerHTML = examples.map(example => `
        <div class="example-item">
          <div class="input">Input: ${example.label}</div>
          <div class="output">Output: "${titleManager.processTitle(example.input)}"</div>
        </div>
      `).join('')
    }

    // Initialize examples
    populateExamples()

    // Add some interactivity hints
    document.getElementById('titleInput').placeholder = 'Try: profile, untitled, null, undefined, empty, long text...'
  </script>
</body>
</html>